.col-sm-12
  .row
    %h3 Listing accounts

    #accounts= render 'accounts'

    #analytics
      - @today = Date.today
      %p= "Total paid expenses for this month: #{number_to_currency( @accounts.where(is_paid: true).where(due_date_month: Date.today.month.to_s, due_date_year: Date.today.year.to_s).pluck(:amount_due).sum )}"
      %p= "Total unpaid expenses for this month: #{number_to_currency( @accounts.where(is_paid: false).where(due_date_month: Date.today.month.to_s, due_date_year: Date.today.year.to_s).pluck(:amount_due).sum )}"
      %p= "Total expenses for #{@today.strftime("%B %Y")}: #{number_to_currency( @accounts.where(due_date_month: Date.today.month.to_s, due_date_year: Date.today.year.to_s).pluck(:amount_due).sum )}"
      %p= "Total expenses YTD: #{number_to_currency( @accounts.pluck(:amount_due).sum )}"
%br

%button.btn.btn-primary#addAccount New Account

#newAccountForm{style: "display: none;"}
  = form_for(@account, html: { class: 'form-horizontal', role: 'form'}, remote: true) do |f|
    .form-group
      = f.label :name, class: 'col-lg-2 control-label'
      .col-lg-4
        = f.text_field :name
    .form-group
      = f.label :url, class: 'col-lg-2 control-label'
      .col-lg-4
        = f.text_field :url
    .form-group
      = f.label :due_date, class: 'col-lg-2 control-label'
      .col-lg-4
        = f.text_field :due_date, class: 'datepicker input'
    .form-group
      = f.label :amount_due, class: 'col-lg-2 control-label'
      .col-lg-4
        = f.text_field :amount_due
    .form-group
      = f.label :priority, class: 'col-lg-2 control-label'
      .col-lg-4
        = f.select :priority, options_for_select([['High', 1], ['Medium', 2], ['Low', 3]]), {}
    .form-group
      = f.label :is_paid, class: 'col-lg-2 control-label'
      .col-lg-4
        = f.check_box :is_paid

    .form-group
      .col-lg-offset-2.col-lg-4
        = f.submit 'Save', class: 'btn btn-default'
    .form-group
      #close.col-lg-offset-2.col-lg-4=link_to 'close', '#'

:javascript
  $(document).ready(function() {
    $('.datepicker').datepicker({
      dateFormat: "yy-mm-dd"
    });
  });

